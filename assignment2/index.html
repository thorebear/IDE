<!DOCTYPE html>

<html><head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />   

   <!-- BOOTSTRAP CSS -->
   <!-- Latest compiled and minified CSS -->
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
   <!-- JQUERY -->
   <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

   <!-- BOOSTRAP JS -->
   <!-- Latest compiled and minified JavaScript -->
   <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

   <!-- D3 -->
   <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>

   <style>
   body {
      height: 1000px;
      width: 100%;
   }
   svg {
      width: 100%;
   }
   </style>
   
   <!-- Our javascript -->
   <script type="text/javascript">
   d3.select(window).on('load', init);

   var aalborg_data = [];

   function init(){
      d3.csv("aalborg.csv", function(error, data) {
         if (error) throw error;
         
         data.forEach(function(row) {
            aalborg_data.push(row);
         });

         onDataLoaded();
      });
   }

   function onDataLoaded(){
      var svg_height = 200;
      
      var svg = d3.select("body")
         .append("svg")
         .attr("height", svg_height + 30)
         .selectAll("rect");

      
      svg.data(aalborg_data)
         .enter()
         .append("rect")
         .attr("y", function(d){
            return svg_height - getHeight(d);
         })
         .attr("x", function(d,i){
            return i*12;
         })
         .attr("height", function(d){
            return getHeight(d);
         })
         .attr("width", 10)
         .style('fill', function(d,i) { 
            return "rgb(" + Math.floor(Math.random()*255) + ", 0, " + Math.floor(Math.random()*255) + ")"});

      d3.select("svg")
         .selectAll("text")
         .data(aalborg_data)
         .enter()
         .append("text")
         .text(function(d){
            return d.YEAR;
         })
         .attr("x",function(d, i)
            {
               return i * 12;
            })
         .attr("y",function(d,i)
            {
               if (i%2 === 0){
                  return svg_height + 10;
               } 
               else {
                  return svg_height + 20;
               }
            }
         )
         .attr("font-size",6);
      
      function getHeight(d){
         return 120 + parseInt(d.JAN)*20;
      }
   };

   </script>
   <title>Interactive Data Exploration - Assigment 2</title>
</head>
<body>
   
</body>
</html>
